<!doctype html>
<html>
<head>
    <title>Craving Saving</title>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script type="text/javascript" src="/jquery-ui/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/globalize.min.js"></script>

    <script type="text/javascript" src="/dragDrop.js"></script>
    <script type="text/javascript" src="/homeScreen.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheet.css">
    <link rel="stylesheet" type="text/css" href='https://fonts.googleapis.com/css?family=Questrial'>
    <script> var user = JSON.parse('<%- JSON.stringify(user) %>'); </script> <!-- load into javascript-->
</head>
<body>
     <div class="row" id="heading-row">
        <div class="col-md-3 text-left"> <img src="images/logo.png" alt="Logo" id="logo"> </div>
        <div class="col-md-6 text-center available-funds">John's Available Funds: $<%= user.balance.toFixed(2) %></div>
        <div class="col-md-1"></div>
        <div class="col-md-2 text-right">
            <button class="btn btn-default" id="spend-now-btn">
                <img src="images/spendnow-btn-copy.png" width="100%" height="100%">
            </button>
        </div>
    </div>

    <div class="container">
        <ul class="nav nav-tabs" id="myTab">
            <li class="active">
                <a href="#goals"><h4>Goals</h4></a>
            </li>
            <li>
                <a href="#earn"><h4>Earn</h4></a>
            </li>
            <li>
                <a href="#history"><h4>History</h4></a>
            </li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="goals">


                <div id="home-screen">
                    <div class="row goals-row" id="goals-row">
                        <div class="col-md-3" id="savings-account">
                            <div id="savings-account" class="panel panel-default goal hoverable-panel">
                                <div class="non-hover non-hover-div">
                                    <h4 class="text-center">Savings Account</h4>
                                    <img src="images/piggy.png" class="goal-icon center-block" style="padding:23px 0px;">
                                    <h4 class="text-center savings-balance">$<%=user.savingsBalance.toFixed(2)%> Saved!</h4>
                                </div>
                                <div class="hover-add hover-div">
                                    <button class="btn btn-default hover-btn-top" id = "open-savings-btn">Open Savings</button>
                                    <button id = "add-to-savings-btn" class="btn btn-default hover-btn-bottom">Add $ to Savings</button>
                                </div>
                            </div>
                        </div>
                        

                        <% for (var i=0; i<user.goals.length; i++){ %>  
                            <% var goal = user.goals[i]; %>  
                            <% var goalID = i; %>
                            <% include goalSquare.ejs %>
                        <%} %>
                         <div class="col-md-3 add-new-goal-col">
                            <div id="new-goal" class="panel panel-default btn btn-default new-goal">
                                <div class="text-center add-new-goal">
                                    <i class="glyphicon glyphicon-plus-sign"></i>
                                    <h4 class="text-center">Add new goal</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>




            </div>
            <div class="tab-pane" id="earn">Earn is not yet implemented.</div>
            <div class="tab-pane" id="history">History is not yet implemented.</div>

            <div id ="modal-add-money" class = "modal fade" role="dialog" tabindex="-1">
                <div class="modal-dialog add-money-dialog">
                    <div class="modal-content add-money-content" id="window-wrapper">
                        <div class="modal-header add-money-header">
                            <button type="button" class="close" data-dismiss="modal">×</button>
                            <h3>Transfer Money</h3>
                        </div>
                        <div class="modal-body add-money-body">
                            <div id="drag-and-drop-wrapper">
                                <div id="left-window">
                                    <span id="left-balance"></span>
                                </div>
                                <div id="arrow-block">
                                    <img src='/images/thin-arrow.png' id='transfer-arrow'>
                                    <span>$ <input id="transfer" value="0"></span>
                                </div>
                                <button id ="organize-button" class = "btn btn-default">Organize</button>
                                <div id="right-window">
                                    <span id="right-balance"></span>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <div class="footer-button-wrapper">
                                <button id="cancel-transaction-button" class="btn btn-danger">Cancel</button>
                                <button id="confirm-transaction-button" class="btn btn-success">Confirm</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="purchaseModal" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                            <h3>Confirm Purchase</h3>
                        </div>
                        <div class="modal-body">
                            <h4>Congratulations! You've reached this goal. Press "Complete" to make the purchase.</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger cancel-btn" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-success purchase-btn" data-dismiss="modal">Complete</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-pane" id="earn">Earn $$$</div>
            <div class="tab-pane" id="history">History...</div>
        </div>
    </div>
</body>
</html>
